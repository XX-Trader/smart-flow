# TDD 技能触发快速参考

> **更新时间**: 2026-01-21
> **触发模式**: 完全手动触发（MANUAL）
> **覆盖率要求**: 核心模块 95% | 通用模块 80%

---

## 🎯 如何触发 TDD 技能

### 方式 1️⃣: 直接请求 TDD 开发

```
✅ "用 TDD 开发用户登录功能"
✅ "测试驱动开发实现订单接口"
✅ "先写测试，后写代码"
✅ "使用 TDD 编写策略模块"
```

**触发关键字**: `TDD`, `测试驱动`, `先写测试`, `用TDD`, `使用TDD`

---

### 方式 2️⃣: 请求检查覆盖率

```
✅ "检查覆盖率"
✅ "测试覆盖率达标了吗？"
✅ "运行覆盖率检查"
✅ "查看代码覆盖率"
✅ "coverage 报告"
```

**触发关键字**: `覆盖率`, `测试覆盖率`, `代码覆盖率`, `覆盖率检查`, `检查覆盖率`, `测试覆盖`, `coverage`

---

### 方式 3️⃣: 要求编写测试

```
✅ "写测试用例"
✅ "编写单元测试"
✅ "给这个功能加上测试"
✅ "补充测试用例"
✅ "需要测试"
✅ "要写测试"
```

**触发关键字**: `写测试`, `写测试用例`, `编写测试`, `需要测试`, `要写测试`, `加上测试`, `补充测试`

---

### 方式 4️⃣: 强调代码质量

```
✅ "确保代码质量"
✅ "需要高质量的测试"
✅ "测试质量要求"
✅ "高质量的代码"
```

**触发关键字**: `测试质量`, `高质量代码`, `代码质量`

---

### 方式 5️⃣: 明确测试类型

```
✅ "编写单元测试"
✅ "集成测试"
✅ "测试用例"
```

**触发关键字**: `单元测试`, `集成测试`, `测试用例`

---

## 🚫 不会触发的情况

以下情况**不会**自动触发 TDD（需要明确请求测试）：

```
❌ "实现一个登录功能"         (没有提及测试)
❌ "修复这个 bug"              (没有提及测试)
❌ "添加一个 API 接口"         (没有提及测试)
❌ "优化性能"                  (没有提及测试)
```

**如果需要测试，必须明确说**:
```
✅ "用 TDD 实现登录功能"
✅ "修复这个 bug，要写测试"
✅ "添加 API 接口，确保覆盖率达标"
```

---

## ✨ 触发后会自动执行

当 TDD 技能被触发后，AI 会自动：

1. ✅ **强制 TDD 流程**: 先写测试，看测试失败，再写代码
2. ✅ **覆盖率检查**:
   - 核心模块（strategy/, risk/, api/）必须 ≥ 95%
   - 通用模块（utils/, infra/, scripts/）必须 ≥ 80%
3. ✅ **更新测试进度**: 自动更新 TEST_PROGRESS.md
4. ✅ **阻止未达标完成**: 覆盖率不达标不允许标记任务完成

---

## 📋 典型使用场景

### 场景 1: 开发新功能（推荐）

```
你: "用 TDD 开发用户登录功能，覆盖率要达标"

AI: [启动 TDD 流程]
     1. RED: 写测试用例
     2. 验证测试失败
     3. GREEN: 实现代码
     4. 验证测试通过
     5. 检查覆盖率 ≥ 95%
     6. 更新 TEST_PROGRESS.md
     7. ✅ 任务完成
```

### 场景 2: 修复 Bug

```
你: "修复登录 bug，要写测试用例"

AI: [启动 TDD 流程]
     1. 写失败测试重现 bug
     2. 修复代码
     3. 验证测试通过
     4. 检查覆盖率
     5. ✅ Bug 修复完成
```

### 场景 3: 检查现有代码覆盖率

```
你: "检查一下项目覆盖率"

AI: [运行覆盖率检查]
     1. 执行 npm run test:cov
     2. 解析覆盖率报告
     3. 对比目标（核心95%，通用80%）
     4. 生成覆盖率报告
     5. 列出未达标模块
```

---

## 🔥 快速触发短语（复制粘贴）

### 开发功能
- "用 TDD 开发 [功能名]"
- "测试驱动开发实现 [功能名]"
- "编写 [功能名] 的测试用例"

### 修复问题
- "修复 [问题]，要写测试"
- "用 TDD 修复这个 bug"
- "补充测试用例来修复这个问题"

### 检查质量
- "检查覆盖率"
- "测试覆盖率达标了吗？"
- "查看代码覆盖率报告"
- "确保代码质量，覆盖率要达标"

---

## 📚 相关文档

- [CLAUDE.md](../CLAUDE.md) - 全局开发规范
- [TEST_PROGRESS.md](../TEST_PROGRESS.md) - 测试进度跟踪
- [smart-flow/skills/test-driven-development/SKILL.md](../smart-flow/skills/test-driven-development/SKILL.md) - TDD 技能文档
- [scripts/check-coverage.sh](../scripts/check-coverage.sh) - 覆盖率检查脚本

---

**维护说明**:
- 本文档列出了所有触发 TDD 技能的关键字
- 更新技能触发配置时，同步更新本文档
- 保存为书签，方便快速查询

---

**文档版本**: v1.0
**最后更新**: 2026-01-21
**触发模式**: 完全手动触发（MANUAL）
