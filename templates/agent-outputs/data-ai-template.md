# 数据与AI类 Agent 输出模板

> **适用Agent**: ai-engineer, data-engineer, ml-engineer, mlops-engineer, data-scientist, data-analyst, prompt-engineer, python-expert, quant-analyst, academic-research-synthesizer（10个）
> **版本**: v2.1.0
> **更新**: 2025-01-07

---

## 模板说明

本模板适用于所有**数据与AI类** Agent，包括：
- AI/LLM应用开发
- 数据工程与ETL
- 机器学习与深度学习
- MLOps与模型部署
- 数据科学与分析
- Prompt工程
- Python专家
- 量化分析
- 学术研究综合

---

## 通用输出模板

### 1. 任务概述
```markdown
## 任务概述

**任务目标**: [清晰描述要达成的目标]

**任务范围**:
- 包含: [明确包含的内容]
- 不包含: [明确不包含的内容]

**成功标准**:
- [ ] [可衡量的标准1]
- [ ] [可衡量的标准2]
- [ ] [可衡量的标准3]

**约束条件**:
- 技术约束: [列出技术限制]
- 数据约束: [列出数据限制]
- 资源约束: [列出资源限制]
```

### 2. 分析过程
```markdown
## 分析过程

### 2.1 问题定义
**核心问题**: [描述核心问题]

**问题类型**:
- 分类/回归/聚类/推荐/生成/其他
- 监督学习/无监督学习/强化学习

**业务影响**: [描述业务价值]

### 2.2 数据分析
**数据来源**:
- [数据源1]: [描述]
- [数据源2]: [描述]

**数据规模**:
- 样本数量: [X]条
- 特征数量: [X]个
- 时间跨度: [起始] - [结束]

**数据质量**:
- 完整性: [缺失值比例]
- 准确性: [异常值情况]
- 一致性: [数据一致性评估]

### 2.3 技术方案探索
**可能的方案**:
1. **方案A**: [算法/模型名称]
   - 优点: [列出优点]
   - 缺点: [列出缺点]
   - 适用场景: [说明]

2. **方案B**: [算法/模型名称]
   - 优点: [列出优点]
   - 缺点: [列出缺点]
   - 适用场景: [说明]

### 2.4 方案选择
**推荐方案**: [方案A/B/混合方案]

**选择理由**:
1. [理由1]
2. [理由2]
3. [理由3]

**技术栈**:
- 编程语言: [Python/R/其他]
- 框架: [TensorFlow/PyTorch/Scikit-learn/Pandas/其他]
- 工具: [列出工具]
```

### 3. 详细实施方案
```markdown
## 详细实施方案

### 3.1 数据准备
#### 3.1.1 数据收集
- **数据源**: [详细说明数据来源]
- **采集方法**: [API/爬虫/数据库/文件]
- **采集频率**: [实时/批量/一次性]

#### 3.1.2 数据清洗
**缺失值处理**:
- [列名1]: [删除/填充均值/填充中位数/前向填充]
- [列名2]: [删除/填充均值/填充中位数/前向填充]

**异常值处理**:
- [列名1]: [删除/截断/转换]
- [列名2]: [删除/截断/转换]

**数据类型转换**:
- [列名1]: [原始类型] → [目标类型]
- [列名2]: [原始类型] → [目标类型]

#### 3.1.3 特征工程
**特征选择**:
- 选择方法: [过滤法/包装法/嵌入法]
- 选择特征: [列出选中的特征]
- 排除特征: [列出排除的特征及原因]

**特征构造**:
- 新特征1: [构造逻辑]
- 新特征2: [构造逻辑]

**特征变换**:
- 归一化: [Min-Max/StandardScaler/其他]
- 编码: [One-Hot/Label Encoding/目标编码]
- 降维: [PCA/t-SNE/不降维]

### 3.2 模型设计/选择
#### 3.2.1 模型架构
**模型类型**: [深度学习/传统机器学习/生成式模型]

**模型结构**:
```
[模型架构图或文字描述]
输入层 → 隐藏层1 → 隐藏层2 → 输出层
```

**超参数配置**:
- 学习率: [值]
- 批次大小: [值]
- 迭代次数: [值]
- 优化器: [Adam/SGD/其他]
- 损失函数: [MSE/CrossEntropy/其他]

#### 3.2.2 模型选择理由
- 为什么选择该模型: [理由]
- 与替代方案的对比: [对比说明]
- 预期性能: [预期指标]

### 3.3 训练流程
#### 3.3.1 数据划分
- 训练集: [X]%
- 验证集: [X]%
- 测试集: [X]%
- 划分方法: [随机划分/时间序列划分/分层划分]

#### 3.3.2 训练策略
**训练流程**:
1. 数据加载与预处理
2. 模型初始化
3. 训练循环
   - 前向传播
   - 损失计算
   - 反向传播
   - 参数更新
4. 验证与早停
5. 模型保存

**训练技巧**:
- [ ] 数据增强
- [ ] 正则化（L1/L2/Dropout）
- [ ] 学习率调度
- [ ] 梯度裁剪

#### 3.3.3 训练环境
- 硬件: [CPU/GPU/TPU]
- 框架版本: [版本号]
- 依赖库: [列出依赖]

### 3.4 评估指标
#### 3.4.1 评估指标选择
**主要指标**:
- [指标1]: [值] - [说明]
- [指标2]: [值] - [说明]

**辅助指标**:
- [指标3]: [值] - [说明]
- [指标4]: [值] - [说明]

#### 3.4.2 基线对比
**基线模型**:
- 模型: [模型名称]
- 性能: [指标值]

**当前模型**:
- 模型: [模型名称]
- 性能: [指标值]
- 提升: [X]%

### 3.5 部署方案
#### 3.5.1 部署架构
```
[部署架构图]
输入数据 → [预处理] → [模型推理] → [后处理] → 输出结果
```

#### 3.5.2 部署方式
- **部署环境**: [本地/云服务器/边缘设备]
- **部署方式**: [REST API/流式/批处理]
- **框架**: [Flask/FastAPI/TensorFlow Serving/TorchServe/其他]

#### 3.5.3 性能优化
- 模型压缩: [量化/剪枝/蒸馏]
- 推理加速: [ONNX/TensorRT/其他]
- 缓存策略: [说明缓存策略]

#### 3.5.4 监控与维护
- **监控指标**: [列出监控指标]
- **日志记录**: [说明日志内容]
- **模型更新**: [更新策略]
- **异常处理**: [异常情况处理方案]
```

### 4. 验证与测试
```markdown
## 验证与测试

### 4.1 模型验证
**验证方法**:
- 交叉验证: [K折/时间序列交叉验证]
- 留出验证: [描述]
- 自助法: [描述]

**验证结果**:
- 训练集性能: [指标值]
- 验证集性能: [指标值]
- 测试集性能: [指标值]
- 过拟合检查: [有无过拟合]

### 4.2 业务验证
**业务场景测试**:
1. **[场景1]**
   - 测试方法: [如何测试]
   - 预期结果: [期望结果]
   - 实际结果: [实际结果]
   - 结论: [通过/失败]

2. **[场景2]**
   - 测试方法: [如何测试]
   - 预期结果: [期望结果]
   - 实际结果: [实际结果]
   - 结论: [通过/失败]

### 4.3 边界测试
**极端情况**:
- [ ] 缺失数据
- [ ] 异常值
- [ ] 数据分布偏移
- [ ] 高并发场景
```

### 5. 建议与后续
```markdown
## 建议与后续

### 5.1 模型改进
**短期改进**（1-2周）:
- [ ] [改进项1]
- [ ] [改进项2]

**中期改进**（1-2月）:
- [ ] [改进项1]
- [ ] [改进项2]

**长期优化**（3月+）:
- [ ] [改进项1]
- [ ] [改进项2]

### 5.2 后续步骤
1. **[步骤1]**: [描述] - [负责人] - [时间]
2. **[步骤2]**: [描述] - [负责人] - [时间]
3. **[步骤3]**: [描述] - [负责人] - [时间]

### 5.3 风险提示
- **风险1**: [描述风险及应对措施]
- **风险2**: [描述风险及应对措施]
```

---

## 特殊 Agent 定制

### ai-engineer 模板增强
```markdown
# LLM/AI应用开发方案

## 1. 需求分析
### 1.1 应用场景
- **场景描述**: [详细描述应用场景]
- **核心功能**: [列出核心功能]
- **用户痛点**: [解决什么问题]

### 1.2 技术需求
- **模型选择**: [GPT-4/Claude/开源模型/自训练模型]
- **输入类型**: [文本/图像/音频/多模态]
- **输出类型**: [文本/结构化数据/图像/其他]
- **性能要求**: [响应时间/吞吐量]

## 2. 系统设计
### 2.1 架构设计
```
用户 → [API层] → [Prompt工程] → [LLM] → [结果处理] → 用户
              ↓
         [向量数据库] ← [RAG检索]
              ↓
         [知识库/文档]
```

### 2.2 Prompt设计
**系统Prompt**:
```
[角色定义]
[任务说明]
[输出格式]
[约束条件]
```

**Prompt模板**:
```
模板1: [模板名称]
- 变量: [列出变量]
- 示例: [给出示例]

模板2: [模板名称]
- 变量: [列出变量]
- 示例: [给出示例]
```

**Prompt优化策略**:
- [ ] Few-shot学习
- [ ] 思维链（Chain-of-Thought）
- [ ] 角色设定
- [ ] 输出格式约束

### 2.3 RAG设计（如适用）
**知识库构建**:
- 数据来源: [文档/网页/数据库]
- 切片策略: [固定长度/语义切分]
- 向量模型: [OpenAI Embedding/Sentence Transformers/其他]
- 向量数据库: [Pinecone/Weaviate/Milvus/其他]

**检索策略**:
- 检索方法: [向量检索/关键词检索/混合检索]
- Top-K: [值]
- 重排序: [使用/不使用]

## 3. 实现方案
### 3.1 技术栈
- **LLM框架**: [LangChain/LlamaIndex/Haystack]
- **API库**: [OpenAI SDK/Anthropic SDK/Transformers]
- **数据库**: [向量数据库/关系数据库]
- **Web框架**: [FastAPI/Flask/Streamlit]

### 3.2 核心功能实现
#### 功能1: [功能名称]
- 实现逻辑: [描述]
- 代码模块: [文件路径]
- 接口定义: [API端点]

#### 功能2: [功能名称]
- 实现逻辑: [描述]
- 代码模块: [文件路径]
- 接口定义: [API端点]

### 3.3 性能优化
- **缓存策略**: [说明缓存策略]
- **批处理**: [说明批处理策略]
- **异步处理**: [说明异步处理方案]
- **流式输出**: [是否支持流式输出]

## 4. 部署与监控
### 4.1 部署方案
- **部署方式**: [API服务/Web应用/CLI工具]
- **云服务**: [AWS/Azure/GCP/本地]
- **容器化**: [Docker/Kubernetes]

### 4.2 成本控制
- **Token成本**: [预估成本]
- **API调用优化**: [优化策略]
- **预算控制**: [控制方案]

### 4.3 监控指标
- **性能指标**: [响应时间/成功率]
- **质量指标**: [用户满意度/准确率]
- **成本指标**: [Token使用量/API调用次数]

---
**质量评分**: [X]/100
**生成时间**: [timestamp]
**Agent**: ai-engineer
```

### data-scientist 模板增强
```markdown
# 数据科学与分析方案

## 1. 业务理解
### 1.1 业务背景
- **行业**: [金融/电商/医疗/其他]
- **业务场景**: [描述业务场景]
- **核心问题**: [要解决的业务问题]

### 1.2 分析目标
**主要目标**:
- [目标1]: [描述]
- [目标2]: [描述]

**次要目标**:
- [目标3]: [描述]
- [目标4]: [描述]

## 2. 探索性数据分析（EDA）
### 2.1 数据概览
**数据集信息**:
- 数据集大小: [行数 x 列数]
- 时间范围: [起始] - [结束]
- 数据来源: [详细说明]

**变量类型**:
- 数值型: [列出列名]
- 类别型: [列出列名]
- 时间型: [列出列名]
- 文本型: [列出列名]

### 2.2 单变量分析
**数值型变量**:
```
变量名: [列名]
- 均值: [值]
- 中位数: [值]
- 标准差: [值]
- 最小值: [值]
- 最大值: [值]
- 分布: [正态/偏态/其他]
```

**类别型变量**:
```
变量名: [列名]
- 类别数: [值]
- 主要类别: [列出]
- 分布: [均衡/不均衡]
```

### 2.3 双变量分析
**相关性分析**:
- 高相关变量对: [列出]
- 相关系数矩阵: [说明]

**分组分析**:
- 分组变量: [列名]
- 组间差异: [描述差异]

### 2.4 可视化
**主要图表**:
1. [图表1]: [类型] - [说明]
2. [图表2]: [类型] - [说明]
3. [图表3]: [类型] - [说明]

## 3. 特征工程
### 3.1 特征构造
**时间特征**:
- [特征1]: [构造逻辑]
- [特征2]: [构造逻辑]

**聚合特征**:
- [特征1]: [聚合逻辑]
- [特征2]: [聚合逻辑]

**交互特征**:
- [特征1]: [交互逻辑]
- [特征2]: [交互逻辑]

### 3.2 特征选择
**统计方法**:
- [ ] 方差阈值
- [ ] 相关系数筛选
- [ ] 卡方检验
- [ ] 互信息

**模型方法**:
- [ ] LASSO回归
- [ ] 随机森林重要性
- [ ] XGBoost重要性

**最终特征列表**: [列出选中的特征]

## 4. 建模与分析
### 4.1 模型选择
**候选模型**:
1. [模型1]: [说明选择理由]
2. [模型2]: [说明选择理由]
3. [模型3]: [说明选择理由]

### 4.2 模型训练
**训练配置**:
- 数据划分: [训练/验证/测试比例]
- 交叉验证: [K折交叉验证]
- 评估指标: [列出指标]

**训练结果**:
| 模型 | 指标1 | 指标2 | 指标3 | 备注 |
|------|-------|-------|-------|------|
| 模型1 | [值] | [值] | [值] | [备注] |
| 模型2 | [值] | [值] | [值] | [备注] |
| 模型3 | [值] | [值] | [值] | [备注] |

### 4.3 模型解释
**特征重要性**:
```
Top 10 重要特征:
1. [特征1]: [重要性分数]
2. [特征2]: [重要性分数]
3. [特征3]: [重要性分数]
...
```

**模型可解释性**:
- [ ] SHAP值分析
- [ ] LIME解释
- [ ] 特征贡献分析

### 4.4 业务洞察
**关键发现**:
1. **[发现1]**: [描述发现] - [业务含义]
2. **[发现2]**: [描述发现] - [业务含义]
3. **[发现3]**: [描述发现] - [业务含义]

**业务建议**:
- [建议1]: [描述]
- [建议2]: [描述]
- [建议3]: [描述]

## 5. 验证与应用
### 5.1 模型验证
**验证方法**:
- [ ] 时间序列验证
- [ ] 留出验证
- [ ] 交叉验证

**验证结果**:
- 训练集: [指标值]
- 验证集: [指标值]
- 测试集: [指标值]

### 5.2 业务应用
**应用场景**:
1. **[场景1]**
   - 应用方式: [描述]
   - 预期效果: [描述]

2. **[场景2]**
   - 应用方式: [描述]
   - 预期效果: [描述]

### 5.3 持续监控
**监控指标**:
- 模型性能: [列出指标]
- 数据分布: [监控方式]
- 业务指标: [列出指标]

---
**质量评分**: [X]/100
**生成时间**: [timestamp]
**Agent**: data-scientist
```

### ml-engineer 模板增强
```markdown
# 机器学习工程方案

## 1. 问题定义
### 1.1 任务类型
- [ ] 监督学习（分类/回归）
- [ ] 无监督学习（聚类/降维）
- [ ] 强化学习
- [ ] 推荐系统

### 1.2 性能目标
- 准确率: ≥[X]%
- 召回率: ≥[X]%
- 延迟: <[X]ms
- 吞吐量: ≥[X]QPS

## 2. 数据工程
### 2.1 数据流水线
```
[原始数据] → [数据清洗] → [特征提取] → [特征存储] → [模型训练]
```

### 2.2 特征存储
- 存储方案: [Redis/Redis/数据库]
- 特征版本管理: [说明]
- 特征更新策略: [实时/批量]

## 3. 模型开发
### 3.1 实验跟踪
- 实验管理工具: [MLflow/Weights & Biases/其他]
- 超参数搜索: [Grid Search/Random Search/Bayesian Optimization]
- 实验记录: [说明记录内容]

### 3.2 模型迭代
- 版本控制: [说明版本控制策略]
- A/B测试: [说明测试方案]
- 模型对比: [对比不同版本]

## 4. 生产部署
### 4.1 模型服务化
- 服务框架: [TensorFlow Serving/TorchServe/Seldon]
- API设计: [REST/gRPC]
- 批处理: [说明批处理策略]

### 4.2 模型监控
- 性能监控: [监控指标]
- 数据漂移检测: [检测方法]
- 告警机制: [告警条件]

---
**质量评分**: [X]/100
**生成时间**: [timestamp]
**Agent**: ml-engineer
```

### data-engineer 模板增强
```markdown
# 数据工程方案

## 1. 数据架构
### 1.1 数据流设计
```
[数据源] → [采集] → [存储] → [处理] → [服务] → [应用]
```

### 1.2 技术选型
- 数据库: [PostgreSQL/MongoDB/其他]
- 数据仓库: [Snowflake/BigQuery/ClickHouse]
- 流处理: [Kafka/Flink/Spark Streaming]
- 批处理: [Spark/Airflow/Prefect]

## 2. ETL设计
### 2.1 数据提取
- 提取方式: [全量/增量/CDC]
- 提取频率: [实时/定时]
- 数据源连接: [说明连接方式]

### 2.2 数据转换
- 转换规则: [列出转换规则]
- 数据质量检查: [检查项]
- 异常处理: [处理方式]

### 2.3 数据加载
- 加载策略: [全量覆盖/追加]
- 加载频率: [说明]
- 数据分区: [分区策略]

## 3. 数据质量
### 3.1 数据质量规则
- 完整性: [检查规则]
- 准确性: [检查规则]
- 一致性: [检查规则]
- 时效性: [检查规则]

### 3.2 数据监控
- 监控指标: [列出指标]
- 告警阈值: [设定阈值]
- 数据修复: [修复流程]

---
**质量评分**: [X]/100
**生成时间**: [timestamp]
**Agent**: data-engineer
```

### prompt-engineer 模板增强
```markdown
# Prompt工程方案

## 1. Prompt设计原则
### 1.1 设计理念
- 清晰性: [说明]
- 具体性: [说明]
- 上下文: [说明]
- 约束条件: [说明]

## 2. Prompt模板
### 2.1 系统Prompt
```
[角色定义]
[能力说明]
[约束条件]
[输出格式]
```

### 2.2 用户Prompt模板
**模板1**: [模板名称]
```
[模板内容]
- 变量1: {{variable1}}
- 变量2: {{variable2}}
```

**模板2**: [模板名称]
```
[模板内容]
- 变量1: {{variable1}}
- 变量2: {{variable2}}
```

## 3. Prompt优化
### 3.1 优化技巧
- [ ] Few-shot示例
- [ ] 思维链
- [ ] 自我反思
- [ ] 渐进式提示

### 3.2 A/B测试
- 测试维度: [列出测试维度]
- 评估方法: [说明评估方法]
- 优化指标: [准确率/满意度/其他]

---
**质量评分**: [X]/100
**生成时间**: [timestamp]
**Agent**: prompt-engineer
```

### quant-analyst 模板增强
```markdown
# 量化分析方案

## 1. 策略概述
### 1.1 策略类型
- [ ] 趋势跟踪
- [ ] 均值回归
- [ ] 统计套利
- [ ] 机器学习
- [ ] 其他: [说明]

### 1.2 交易标的
- 标的: [股票/期货/加密货币/其他]
- 交易频率: [高频/中频/低频]
- 时间周期: [tick/分钟/小时/日]

## 2. 因子构建
### 2.1 因子类别
**动量因子**:
- [因子1]: [计算逻辑]
- [因子2]: [计算逻辑]

**反转因子**:
- [因子1]: [计算逻辑]
- [因子2]: [计算逻辑]

**波动率因子**:
- [因子1]: [计算逻辑]
- [因子2]: [计算逻辑]

### 2.2 因子检验
- IC检验: [IC值]
- ICIR: [值]
- 换手率: [值]
- 分层回测: [结果]

## 3. 回测分析
### 3.1 回测配置
- 回测周期: [起始] - [结束]
- 基准: [基准指数]
- 交易成本: [手续费/滑点]
- 初始资金: [金额]

### 3.2 回测结果
**收益指标**:
- 总收益率: [X]%
- 年化收益率: [X]%
- 基准收益率: [X]%
- 超额收益: [X]%

**风险指标**:
- 最大回撤: [X]%
- 夏普比率: [值]
- 卡玛比率: [值]
- 波动率: [值]

**交易统计**:
- 交易次数: [X]
- 胜率: [X]%
- 盈亏比: [值]
- 平均持仓时间: [X]天

## 4. 风险控制
### 4.1 风险管理
- 仓位管理: [说明策略]
- 止损策略: [说明]
- 风险限额: [设定限额]

---
**质量评分**: [X]/100
**生成时间**: [timestamp]
**Agent**: quant-analyst
```

---

## 使用说明

### 在技能中引用模板

```markdown
## Agent 调用指令

调用 `ai-engineer` agent 时，请遵循以下要求：

1. **输出格式**: 使用 `templates/agent-outputs/data-ai-template.md`
2. **章节要求**: 包含所有必需章节
3. **质量标准**: 输出质量评分 ≥90分
```

### 模板验证（宽松模式）

由于采用宽松验证：
- Agent 输出后**不强制检查格式**
- 建议在 Agent 提示中**明确引用模板**
- 输出结果由用户**手动检查**

---

## 版本历史

### v2.1.0 (2025-01-07)
- ✅ 创建通用模板
- ✅ 添加 ai-engineer 定制模板（LLM应用开发）
- ✅ 添加 data-scientist 定制模板（数据科学分析）
- ✅ 添加 ml-engineer 定制模板（机器学习工程）
- ✅ 添加 data-engineer 定制模板（数据工程）
- ✅ 添加 prompt-engineer 定制模板（Prompt工程）
- ✅ 添加 quant-analyst 定制模板（量化分析）
- ✅ 支持10个数据与AI类 Agent

---

**最后更新**: 2025-01-07
**维护者**: Smart Flow Team
