# Claude Code 历史记录恢复指南

## 问题原因
历史记录是按**项目目录**保存的，当前在 `my-plugins` 目录，但历史在 `smart-flow` 子目录。

## 解决方案

### ✅ 方案 1：在正确目录打开项目（最简单）

1. 关闭当前 VSCode
2. 重新打开，选择 `smart-flow` 文件夹作为项目根目录：
   ```
   d:\学习资料\量化交易\my-plugins\smart-flow
   ```
3. 启动 Claude Code，历史记录会自动保存到该目录的 `.claude/` 下

### 🔧 方案 2：创建全局配置目录

如果需要跨项目访问历史，创建全局配置：

```bash
# Windows PowerShell
mkdir -p $env:USERPROFILE\.claude

# 或 Git Bash
mkdir -p ~/.claude
```

然后在 `~/.claude/CLAUDE.md` 添加全局配置。

### 🗑️ 方案 3：清理并重建 VSCode 扩展缓存

1. 关闭 VSCode
2. 删除扩展存储：
   ```
   %APPDATA%\Code\User\globalStorage\anthropic.claude-code
   ```
3. 重新安装 Claude Code 扩展
4. 在 `smart-flow` 目录重新打开项目

## 验证历史记录是否保存

在 `smart-flow` 目录下检查：
```bash
ls -la .claude/
```

应该能看到历史记录文件（*.json 或 messages.db）

## 预防措施

**始终在同一项目目录下工作**，历史记录才会持续保存。

如果需要在多个项目间切换，建议：
- 每个项目都在独立的 VSCode 窗口中打开
- 或使用符号链接将所有项目的 `.claude` 链接到全局目录

## 联系支持

如果以上方案都不行，请提供：
- VSCode 版本
- Claude Code 扩展版本
- 完整的错误截图
