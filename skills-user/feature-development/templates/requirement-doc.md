# 需求文档模板

> **适用场景**: 中等/复杂功能
> **填写说明**: ✅ 必填 | 🔸 可选

---

## 1. 功能概述

**✅ 用1-2句话描述这个功能的核心价值**

示例：支持将交易员分组管理，用户可以创建分组、添加交易员到分组、对分组进行批量操作。

---

## 2. 用户角色和使用场景

**✅ 谁会使用这个功能，在什么情况下使用**

| 角色 | 使用场景 | 频率 |
|------|----------|------|
| 量化交易员 | 每天查看分组收益 | 高 |
| 管理员 | 每周调整分组配置 | 中 |

---

## 3. 详细功能点

**✅ 列出所有功能，不要遗漏**

- [ ] 功能点1：创建分组（输入名称、描述）
- [ ] 功能点2：将交易员添加到分组（多选）
- [ ] 功能点3：查看分组下的交易员列表（分页）
- [ ] 功能点4：对分组进行批量启停
- [ ] 功能点5：删除分组（需二次确认）

---

## 4. 业务规则和约束

**✅ 必须遵守的规则**

1. 分组名称不能重复
2. 一个交易员只能属于一个分组
3. 删除分组前，需要先将交易员移出或移到默认分组
4. 批量操作最多支持50个交易员

---

## 5. 边界情况处理

**✅ 异常情况如何处理**

| 异常情况 | 处理方式 |
|----------|----------|
| 分组名称为空 | 提示"分组名称不能为空" |
| 分组名称重复 | 提示"分组名称已存在" |
| 添加的交易员已在其他分组 | 提示"交易员XX已在YY分组" |
| 删除分组时有交易员 | 禁止删除，提示先移出交易员 |

---

## 6. 实现思路

**✅ 如何实现这个功能，但不写代码**

> 数据层面：
> - 新增分组表，存储分组基础信息
> - 新增关联表，存储交易员和分组的多对多关系
> - 使用级联删除或软删除处理分组删除
>
> 业务层面：
> - 创建分组时，同时创建默认配置
> - 添加交易员到分组时，检查是否已在其他分组
> - 批量操作使用异步任务，避免超时
>
> 交互层面：
> - 使用表格展示分组列表，支持搜索和分页
> - 使用穿梭框(Transfer)组件进行交易员选择
> - 批量操作使用多选列 + 统一操作按钮

**❌ 不要包含**：
- 具体的字段定义（如 `group_name CharField`）
- API接口路径（如 `/api/pm-robot/create`）
- 前端组件名称（如 `GroupManage.vue`）
- 任何代码片段

---

## 7. 非功能需求

**🔸 性能、安全、体验等要求**

| 类型 | 要求 |
|------|------|
| 性能 | 分组列表加载时间 < 500ms |
| 安全 | 只有创建者可以编辑/删除自己的分组 |
| 体验 | 所有操作有明确的成功/失败提示 |

---

## 8. 验收标准

**✅ 如何判断功能完成**

- [ ] 可以成功创建、编辑、删除分组
- [ ] 可以将交易员添加到分组，并正确校验重复
- [ ] 批量操作正确执行，并在操作完成后刷新列表
- [ ] 所有边界情况都有友好的错误提示
- [ ] 前端页面在各种数据状态下正常显示（空态、加载态、错误态）

---

**文档版本**: v1.0
**最后更新**: YYYY-MM-DD
**状态**: 待确认 / 已确认
