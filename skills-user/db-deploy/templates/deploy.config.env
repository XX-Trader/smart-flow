# ==============================================================================
# 部署配置文件
# ==============================================================================
# 说明: 复制此文件为 deploy.config.env 并填写实际配置值
# 使用: bash scripts/deploy.sh --config deploy.config.env
# ==============================================================================

# ------------------------------------------------------------------------------
# 服务器配置
# ------------------------------------------------------------------------------
SERVER_HOST="your.server.ip"           # 服务器 IP 地址
SERVER_PORT="22"                        # SSH 端口 (默认 22)
SERVER_USER="root"                      # SSH 登录用户
SERVER_PASSWORD=""                      # 服务器密码 (留空使用 SSH 密钥)
SERVER_SSH_KEY_PATH=""                  # SSH 密钥路径 (留空使用默认 ~/.ssh/id_ed255)

# ------------------------------------------------------------------------------
# GitHub 仓库配置
# ------------------------------------------------------------------------------
GITHUB_OWNER="your-github-username"     # GitHub 用户名或组织名
GITHUB_REPO="your-repo-name"            # 仓库名称
GITHUB_BRANCH="main"                    # 部署分支

# 如果前后端分离，使用以下配置
GITHUB_FRONTEND_REPO=""                 # 前端仓库名称 (留空则使用 GITHUB_REPO)
GITHUB_FRONTEND_BRANCH="main"           # 前端部署分支

# GitHub Personal Access Token (用于自动部署)
GITHUB_PAT=""                           # GitHub PAT (建议通过 Secrets 配置)

# ------------------------------------------------------------------------------
# 项目配置
# ------------------------------------------------------------------------------
PROJECT_NAME="my-project"               # 项目名称 (用于目录和服务命名)
PROJECT_ROOT="/www/wwwroot/my-project"  # 项目根目录
PROJECT_TYPE="fullstack"                # 项目类型: fullstack | backend | frontend

# ------------------------------------------------------------------------------
# 域名配置 (可选，有域名时填写)
# ------------------------------------------------------------------------------
HAS_DOMAIN="false"                      # 是否使用域名: true | false
DOMAIN="example.com"                    # 主域名
WWW_DOMAIN="www.example.com"            # www 子域名
API_DOMAIN="api.example.com"            # API 子域名 (可选)
ENABLE_SSL="true"                       # 是否启用 SSL: true | false
SSL_EMAIL="admin@example.com"           # SSL 证书联系邮箱

# ------------------------------------------------------------------------------
# 数据库配置
# ------------------------------------------------------------------------------
DB_TYPE="mysql"                         # 数据库类型: mysql | postgresql | sqlite
DB_NAME="my_database"                   # 数据库名称
DB_USER="db_user"                       # 数据库用户
DB_PASSWORD="your_secure_password"      # 数据库密码 (建议 16 位以上)
DB_HOST="localhost"                     # 数据库主机
DB_PORT="3306"                          # 数据库端口

# ------------------------------------------------------------------------------
# Django 配置 (如果使用 Django)
# ------------------------------------------------------------------------------
DJANGO_SECRET_KEY="your_django_secret_key_here"  # Django SECRET_KEY (50 位随机字符串)
DJANGO_SETTINGS_MODULE="myproject.settings"      # Django settings 模块
DJANGO_DEBUG="False"                            # DEBUG 模式
DJANGO_ALLOWED_HOSTS=""                          # ALLOWED_HOSTS (逗号分隔，留空自动使用域名)

# ------------------------------------------------------------------------------
# 前端配置
# ------------------------------------------------------------------------------
FRONTEND_FRAMEWORK="vue"                # 前端框架: vue | react | angular | none
FRONTEND_BUILD_COMMAND="npm run build"  # 构建命令
FRONTEND_DIST_DIR="dist"                # 构建输出目录
FRONTEND_PORT="3000"                    # 开发服务器端口

# ------------------------------------------------------------------------------
# 后端配置
# ------------------------------------------------------------------------------
BACKEND_FRAMEWORK="django"              # 后端框架: django | fastapi | flask | none
BACKEND_PYTHON_VERSION="3.10"           # Python 版本
BACKEND_VENV_NAME="venv"                # 虚拟环境名称
BACKEND_PORT="8000"                     # 开发服务器端口
BACKEND_WORKERS="3"                     # Gunicorn worker 数量

# ------------------------------------------------------------------------------
# Redis 配置 (可选)
# ------------------------------------------------------------------------------
REDIS_ENABLED="true"                    # 是否启用 Redis
REDIS_HOST="localhost"                  # Redis 主机
REDIS_PORT="6379"                       # Redis 端口
REDIS_DB="0"                            # Redis 数据库编号
REDIS_PASSWORD=""                       # Redis 密码 (留空表示无密码)

# ------------------------------------------------------------------------------
# 邮件配置 (可选)
# ------------------------------------------------------------------------------
EMAIL_ENABLED="false"                   # 是否启用邮件
EMAIL_BACKEND="django.core.mail.backends.smtp.EmailBackend"
EMAIL_HOST="smtp.example.com"           # SMTP 服务器
EMAIL_PORT="587"                        # SMTP 端口
EMAIL_USE_TLS="true"                    # 是否使用 TLS
EMAIL_HOST_USER=""                      # SMTP 用户名
EMAIL_HOST_PASSWORD=""                  # SMTP 密码
EMAIL_DEFAULT_SENDER=""                 # 默认发件人

# ------------------------------------------------------------------------------
# 日志配置
# ------------------------------------------------------------------------------
LOG_LEVEL="INFO"                        # 日志级别: DEBUG | INFO | WARNING | ERROR
LOG_RETENTION_DAYS="30"                 # 日志保留天数

# ------------------------------------------------------------------------------
# 备份配置
# ------------------------------------------------------------------------------
BACKUP_ENABLED="true"                   # 是否启用自动备份
BACKUP_SCHEDULE_DB="0 2 * * *"          # 数据库备份 cron 表达式 (每天凌晨 2 点)
BACKUP_SCHEDULE_FILES="0 3 * * 0"       # 文件备份 cron 表达式 (每周日凌晨 3 点)
BACKUP_RETENTION_DAYS="7"               # 备份保留天数

# ------------------------------------------------------------------------------
# 部署选项
# 端口配置HTTP_PORT="80"HTTPS_PORT="443"SSH_PORT="22"
# ------------------------------------------------------------------------------
AUTO_MIGRATE="true"                     # 是否自动执行数据库迁移
AUTO_COLLECTSTATIC="true"               # 是否自动收集静态文件
AUTO_RESTART_SERVICES="true"            # 是否自动重启服务
RUN_BUILD_BEFORE_DEPLOY="true"          # 是否在部署前构建前端

# ------------------------------------------------------------------------------
# 开发模式配置
# ------------------------------------------------------------------------------
DEV_MODE="false"                        # 开发模式: true | false
DEV_HOT_RELOAD="true"                   # 热重载
DEV_SHOW_SQL="false"                    # 显示 SQL 查询

# ------------------------------------------------------------------------------
# 安全配置
# ------------------------------------------------------------------------------
ENABLE_FIREWALL="true"                  # 是否配置防火墙
ALLOWED_IPS=""                          # 允许访问的 IP (逗号分隔，留空表示所有)
RATE_LIMIT_ENABLED="false"              # 是否启用速率限制
RATE_LIMIT_REQUESTS="100"               # 每分钟请求数限制

# ------------------------------------------------------------------------------
# 监控配置 (可选)
# ------------------------------------------------------------------------------
MONITORING_ENABLED="false"              # 是否启用监控
SLACK_WEBHOOK_URL=""                    # Slack 通知 Webhook
ENABLE_ERROR_NOTIFICATIONS="false"      # 是否启用错误通知

# ------------------------------------------------------------------------------
# 自定义命令 (可选)
# ------------------------------------------------------------------------------
PRE_DEPLOY_COMMAND=""                   # 部署前执行的命令
POST_DEPLOY_COMMAND=""                  # 部署后执行的命令
PRE_BUILD_COMMAND=""                    # 构建前执行的命令
POST_BUILD_COMMAND=""                   # 构建后执行的命令

# ------------------------------------------------------------------------------
# 其他配置
# ------------------------------------------------------------------------------
TIMEZONE="Asia/Shanghai"                # 时区
LOCALE="zh_CN.UTF-8"                    # 语言环境

# ==============================================================================
# 配置文件结束
# ==============================================================================
# 提示:
# 1. 所有密码和密钥应使用强随机字符串
# 2. 生产环境必须设置 DJANGO_SECRET_KEY
# 3. 建议使用 SSH 密钥而非密码登录
# 4. 敏感信息不要提交到版本控制系统
# ==============================================================================
