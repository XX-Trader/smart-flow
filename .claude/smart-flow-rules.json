{
  "version": "1.0.0",
  "lastUpdated": "2025-01-10",
  "skillName": "smart-workflow",
  "description": "Smart Flow 自动触发规则配置",

  "autoTrigger": {
    "enabled": true,
    "keywords": [
      "新增",
      "开发",
      "实现",
      "制作",
      "创建",
      "功能",
      "模块",
      "页面",
      "接口",
      "build",
      "develop",
      "implement",
      "create",
      "feature",
      "add",
      "make"
    ],
    "intentPatterns": [
      "(帮我|帮我做个|做一个|做一个功能).{0,50}",
      "(新增|开发|实现|制作|创建).{0,30}(功能|模块|页面|接口)",
      "(应该|大概|可能|像).{0,50}(实现|做|开发)"
    ],
    "vagueTerms": [
      "大概",
      "可能",
      "应该",
      "像",
      "好像",
      "差不多"
    ],
    "minLength": 50,
    "skipWhenExplicit": [
      "/smart-flow",
      "/sf",
      "smart-flow",
      "smartflow"
    ]
  },

  "stages": {
    "requirements": {
      "enabled": true,
      "agent": "requirements-clarity",
      "questions": [
        {
          "id": "goal",
          "question": "这个功能的主要目标是什么？",
          "type": "text",
          "required": true
        },
        {
          "id": "users",
          "question": "谁会使用这个功能？",
          "type": "choice",
          "options": ["普通用户", "管理员", "开发者", "其他"],
          "required": true
        },
        {
          "id": "coreFeatures",
          "question": "哪些是必须功能？哪些是可选功能？",
          "type": "multiSelect",
          "required": true
        },
        {
          "id": "techStack",
          "question": "有特定的技术栈偏好吗？",
          "type": "multiSelect",
          "options": ["无偏好", "React", "Vue", "Django", "FastAPI", "Node.js"],
          "required": false
        }
      ]
    },
    "decomposition": {
      "enabled": true,
      "agent": "task-decomposer",
      "strategy": "keyword-matching",
      "maxParallel": 5
    },
    "execution": {
      "enabled": true,
      "mode": "parallel",
      "maxParallel": 5,
      "timeout": 600000
    },
    "synthesis": {
      "enabled": true,
      "format": "markdown",
      "include": [
        "requirements",
        "design",
        "architecture",
        "code",
        "tests",
        "security"
      ]
    }
  },

  "showcaseAgents": {
    "plan-reviewer": {
      "file": "plan-reviewer_showcase.md",
      "trigger": "审查计划|review plan|计划评审|验证计划",
      "description": "实施前审查计划，找出潜在问题和缺失考虑"
    },
    "refactor-planner": {
      "file": "refactor-planner_showcase.md",
      "trigger": "重构计划|refactor plan|代码重构|重构代码",
      "description": "创建详细的重构计划和风险评估"
    },
    "code-refactor-master": {
      "file": "code-refactor-master_showcase.md",
      "trigger": "执行重构|代码重构|refactor code|重组代码",
      "description": "执行复杂重构，追踪依赖关系"
    },
    "auto-error-resolver": {
      "file": "auto-error-resolver_showcase.md",
      "trigger": "修复编译错误|TypeScript 错误|tsc error|编译失败",
      "description": "自动修复 TypeScript 编译错误"
    },
    "frontend-error-fixer": {
      "file": "frontend-error-fixer_showcase.md",
      "trigger": "前端错误|React 错误|frontend error|浏览器错误",
      "description": "调试和修复前端错误"
    },
    "code-architecture-reviewer": {
      "file": "code-architecture-reviewer_showcase.md",
      "trigger": "架构审查|代码审查|architecture review|代码质量",
      "description": "审查代码架构一致性和最佳实践"
    },
    "web-research-specialist": {
      "file": "web-research-specialist.md",
      "trigger": "网络搜索|web research|搜索资料|技术调研",
      "description": "创意搜索和深度研究"
    },
    "documentation-architect": {
      "file": "documentation-architect_showcase.md",
      "trigger": "生成文档|编写文档|documentation|技术文档",
      "description": "生成全面的技术文档"
    },
    "doc-sync-checker": {
      "skill": "doc-sync-checker",
      "trigger": "检查文档|文档同步|docs-sync|doc-check|文档是否需要更新|文档是否一致|检查文档状态|验证文档|同步文档|检查API文档|检查接口文档|检查数据库文档|docs|documentation|check docs|sync docs|verify docs|文档维护|文档对齐|文档是否最新|文档和代码同步|代码文档同步|修改了文档|更新了文档|文档检查一下|检查文档和代码|校验文档",
      "description": "自动检查 API 文档和数据库文档是否需要同步更新"
    },
    "code-cleaner": {
      "file": "agents/code-cleaner.md",
      "trigger": "清理代码|代码清理|clean code|code cleaner|冗余代码|重复代码|失效代码|版本冲突|obsolete code|deprecated code|dead code|redundant code|duplicate code|version conflict|优化代码|代码优化|optimize code|refactor|重构|精简代码|简化代码|代码瘦身",
      "description": "检测并删除冗余代码、重复代码、失效逻辑和版本冲突"
    }
  },

  "docSyncCheck": {
    "enabled": true,
    "autoTriggerOnFileChange": true,
    "checkOnPostTask": true,
    "filePatterns": {
      "api": ["*views*", "*controller*", "*route*", "*handler*", "*/api/*"],
      "database": ["*model*", "*schema*", "*entity*", "*/models/*", "*/entities/*"],
      "documentation": ["*.md", "docs/*", "README*", "*API*.md", "*api*.md", "*接口*.md", "*数据库*.md", "*schema*.md"],
      "frontend_api": ["src/api/*", "*/api.ts", "*/api.js"]
    },
    "docsPaths": {
      "api": ["docs/api", "docs/apis", "docs/API"],
      "database": ["docs/database", "docs/db", "docs/schema"],
      "requirements": ["docs/requirements", "docs/需求"]
    },
    "promptOnDiscussion": true,
    "promptMessages": {
      "apiDoc": "检测到 API 接口变更，是否需要在 docs/ 文件夹编写/更新 API 文档？",
      "dbDoc": "检测到数据库字段变更，是否需要在 docs/ 文件夹编写/更新数据库文档？",
      "requirementDoc": "正在讨论需求，是否需要创建需求文档？",
      "docModified": "检测到文档文件变更，正在检查文档与代码的一致性..."
    }
  },

  "categoryMappings": {
    "产品": ["product-manager", "business-analyst"],
    "设计": ["ui-ux-designer", "frontend-developer"],
    "后端": ["backend-architect", "backend-developer"],
    "前端": ["frontend-developer", "nextjs-developer", "react-performance-optimization"],
    "数据库": ["database-architect", "database-optimizer", "sql-expert"],
    "测试": ["test-automator", "test-driven-development"],
    "安全": ["security-auditor"],
    "部署": ["deployment-engineer", "devops-troubleshooter"],
    "文档": ["documentation-architect", "api-documenter"]
  }
}
